name: Builds

on:
  push:
  pull_request:

env:
  BUILD_VERSION: 2.4.0.10002

jobs:

  linux-build:
    name: Linux Build
    runs-on: ubuntu-latest
    steps:
      - name: Set net7.0
        uses: actions/setup-dotnet@v3
        with:
          dotnet-version: '7.0.x'
      - name: View Build Version
        run: echo ${{ env.BUILD_VERSION }}
      - name: View Github Info
        run: echo repository=${{ github.repository }} event_name=${{ github.event_name }} ref=${{ github.ref }} head_ref=${{ github.head_ref }} base_ref=${{ github.base_ref }}
      - name: Checkout
        uses: actions/checkout@v3
        with:
          submodules: recursive
      - name: Restore nuget Packages
        run: dotnet restore Source/Mosa.Linux.sln
      - name: Build
        run: dotnet build Source/Mosa.Linux.sln
      - name: Store Build Artifact
        uses: actions/upload-artifact@v3
        with:
          name: linux-build-artifact
          path: bin
